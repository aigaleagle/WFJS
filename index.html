<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shri Aigal Weather Forecasting Project</title>

  <meta name="description" content="Weather Forecasting Project (wfjs) by Shri Aigal (A S Shridatta Aigal, A M Subraya Aigal, Revathi). Final year BCA project using HTML, CSS, JavaScript, REST API, OpenWeatherMap API.">
  <meta name="keywords" content="shri aigal, SHRI AIGAL, A S Shridatta Aigal, Aigal, A M Subraya Aigal, Revathi, wfjs, weather forecasting, weather dashboard, HTML CSS JavaScript project, OpenWeatherMap API, REST API integration, frontend development, responsive design, weather web app, final year BCA project, BCA Projects, weather forecasting project using HTML CSS JS" />
  <meta property="og:title" content="Weather Forecasting Project by Shri Aigal | BCA Final Year Project" />
  <meta property="og:description" content="WFJS â€” A modern weather forecasting web app using HTML, CSS, JavaScript, OpenWeatherMap API. Developed by Shri Aigal (A S Shridatta Aigal, Revathi, A M Subraya Aigal) for BCA final year." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="URL_TO_YOUR_PROJECT_IMAGE.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background-color: #eef6fb;
        padding: 20px;
        text-align: center;
        margin: 0;
    }
    h1 {
        color: #333;
        font-size: 2em;
    }
    #status {
        margin: 10px 0;
        font-size: 1.1em;
        color: #555;
    }
    button {
        margin: 5px;
        padding: 10px 20px;
        font-size: 1em;
        background-color: #4285F4;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s;
    }
    button:hover { background-color: #306acb; }
    #cardContainer {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        margin-top: 20px;
        gap: 10px;
    }
    .weather-card {
        width: 150px;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        padding: 10px;
        text-align: center;
        transition: transform 0.3s;
    }
    .weather-card:hover { transform: scale(1.05); }
    .weather-card img { width: 50px; height: 50px; }

    /* Chart containers */
    .chart-wrapper {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 25px;
    }
    .chart-box {
        background: #fff;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    @media(max-width: 768px){
      .chart-wrapper { grid-template-columns: 1fr; }
    }

    footer {
        margin-top: 40px;
        padding: 20px;
        background: #4285F4;
        color: white;
        font-size: 1em;
        text-align: center;
    }
    footer .dev-link { cursor: pointer; font-weight: bold; }
    footer .dev-link:hover { color: #ffd700; }
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0; top: 0;
        width: 100%; height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
    }
    .modal-content {
        background: white;
        max-width: 400px;
        margin: 100px auto;
        padding: 20px;
        border-radius: 10px;
        text-align: left;
        position: relative;
    }
    .close-btn {
        position: absolute;
        top: 10px; right: 15px;
        cursor: pointer;
        font-size: 20px;
        color: #333;
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #000000;
    }

    .chart-container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: 20px;
    }

    .chart-box {
      flex: 1;
      min-width: 400px;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }

    .chart-box canvas {
      width: 100% !important;
      height: auto !important;
    }

    @media (max-width: 1024px) {
      .chart-container {
        flex-direction: column;
        align-items: center;
      }
      .chart-box {
        width: 80%;
        min-width: unset;
        margin: 0 auto;
      }
    }

    @media (max-width: 600px) {
      body { padding: 10px; }
      h2 { font-size: 18px; }
      .chart-container {
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      .chart-box {
        width: 100%;
        max-width: 350px;
        padding: 15px;
        border-radius: 12px;
        margin: 0 auto;
      }
      .chart-box canvas { height: 220px !important; }
    }
  </style>
</head>
<body>

  <h1>Weather Dashboard</h1>
  <p id="status">Detecting your location...</p>
  <div>
    <button onclick="loadToday()">Today's Hourly</button>
    <button onclick="loadForecast()">Future 5-Day Forecast</button>
  </div>
  <div id="cardContainer"></div>

  <div class="chart-wrapper">
    <div class="chart-box">
      <h2>Temperature Forecast (Â°C)</h2>
      <canvas id="tempChart"></canvas>
    </div>
    <div class="chart-box">
      <h2>Rainfall Forecast (mm)</h2>
      <canvas id="rainChart"></canvas>
    </div>
  </div>

<script>
const API_KEY = 'f34c742159778db7dfc203789a8ae285';
let lat, lon, cityName;
let tempChart, rainChart;

function displayCards(data) {
  const container = document.getElementById('cardContainer');
  container.innerHTML = '';
  data.forEach(d => {
    const card = document.createElement('div');
    card.className = 'weather-card';
    card.innerHTML = `
      <p><strong>${d.date}</strong></p>
      <p>${d.time || ''}</p>
      <img src="https://openweathermap.org/img/wn/${d.icon}@2x.png" alt="icon">
      <p>${d.temp}Â°C</p>
      <p>${d.desc}</p>
      ${d.rainMm !== undefined ? `<p>ðŸ’§ ${d.rainMm} mm</p>` : ""}
    `;
    container.appendChild(card);
  });
}

function drawCharts(labels, temps, rains) {
  if (tempChart) tempChart.destroy();
  if (rainChart) rainChart.destroy();

  tempChart = new Chart(document.getElementById("tempChart"), {
    type: "line",
    data: {
      labels: labels,
      datasets: [{
        label: "Temperature (Â°C)",
        data: temps,
        borderColor: "#ff9800",
        backgroundColor: "rgba(255,152,0,0.2)",
        tension: 0.3,
        fill: true,
        pointRadius: 5,
        pointHoverRadius: 7
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { labels: { color: "#333" } } },
      scales: {
        x: { ticks: { color: "#333" } },
        y: { ticks: { color: "#333" } }
      }
    }
  });

  rainChart = new Chart(document.getElementById("rainChart"), {
    type: "bar",
    data: {
      labels: labels,
      datasets: [{
        label: "Rainfall (mm)",
        data: rains,
        backgroundColor: "rgba(30,136,229,0.6)",
        borderRadius: 6
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { labels: { color: "#333" } } },
      scales: {
        x: { ticks: { color: "#333" } },
        y: {
          ticks: { color: "#333", callback: v => v + " mm" },
          beginAtZero: true
        }
      }
    }
  });
}

function loadToday() {
  if (!lat || !lon) {
    document.getElementById('status').innerText = 'Waiting for location...';
    return;
  }
  const url = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      cityName = data.city.name;
      const slice = Math.min(8, data.list.length);
      const today = [];
      for (let i = 0; i < slice; i++) {
        const item = data.list[i];
        const dt = new Date(item.dt_txt);
        const rawDesc = item.weather[0]?.description || '';
        const desc = rawDesc.charAt(0).toUpperCase() + rawDesc.slice(1);
        today.push({
          date: dt.toLocaleDateString('en-IN'),
          time: dt.toLocaleTimeString('en-IN', { hour: 'numeric', minute: '2-digit', hour12: true }),
          temp: item.main.temp,
          icon: item.weather[0].icon,
          desc,
          rainMm: item.rain ? (item.rain['3h'] || 0) : 0
        });
      }
      displayCards(today);
      drawCharts(
        today.map(d => d.time),
        today.map(d => d.temp),
        today.map(d => d.rainMm)
      );
      document.getElementById('status').innerText = `${cityName}'s hourly forecast loaded.`;
    });
}

function loadForecast() {
  if (!lat || !lon) {
    document.getElementById('status').innerText = 'Waiting for location...';
    return;
  }
  const url = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      cityName = data.city.name;
      const byDate = {};
      for (const item of data.list) {
        const dateKey = new Date(item.dt_txt).toLocaleDateString('en-IN');
        if (!byDate[dateKey]) byDate[dateKey] = item;
      }
      const forecast = Object.entries(byDate).slice(0, 5).map(([dateKey, item]) => {
        const rawDesc = item.weather[0]?.description || '';
        const desc = rawDesc.charAt(0).toUpperCase() + rawDesc.slice(1);
        return {
          date: dateKey,
          temp: item.main.temp,
          rainMm: item.rain ? (item.rain['3h'] || 0) : 0,
          icon: item.weather[0].icon,
          desc
        };
      });
      displayCards(forecast);
      drawCharts(
        forecast.map(d => d.date),
        forecast.map(d => d.temp),
        forecast.map(d => d.rainMm)
      );
      document.getElementById('status').innerText = `${cityName}'s 5-Day forecast loaded.`;
    });
}

if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(
    pos => {
      lat = pos.coords.latitude;
      lon = pos.coords.longitude;
      document.getElementById('status').innerText = 'Location detected! Loading today\'s weather...';
      loadToday();
    },
    err => {
      document.getElementById('status').innerText = 'Location access denied.';
    }
  );
} else {
  document.getElementById('status').innerText = 'Geolocation not supported.';
}
</script>

  <footer>
    @2025 Weather Forecasting<br>Developed by:
    <span class="dev-link" onclick="showDeveloperInfo()">shri aigal</span>
  </footer>

  <div id="devModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeDeveloperInfo()">&times;</span>
      <h2>Developer Info</h2>
      <p><strong>Name:</strong> A S Shridatta Aigal</p>
      <p><img src="https://img.icons8.com/color/24/gmail.png"/> Gmail:
        <a href="mailto:shriaigal@gmail.com">shriaigal@gmail.com</a></p>
      <p><img src="https://img.icons8.com/ios-glyphs/24/github.png"/> GitHub:
        <a href="https://github.com/shriaigal" target="_blank">github.com/shriaigal</a></p>
      <p><img src="https://img.icons8.com/fluency/24/instagram-new.png"/> Instagram:
        <a href="https://instagram.com/shri_aigal" target="_blank">@shri_aigal</a></p>
    </div>
  </div>

<script>
function showDeveloperInfo() {
  document.getElementById('devModal').style.display = 'block';
}
function closeDeveloperInfo() {
  document.getElementById('devModal').style.display = 'none';
}
</script>
</body>
</html>
